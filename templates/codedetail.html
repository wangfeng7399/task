{% extends 'master/index.html' %}	<!-- BEGIN GLOBAL MANDATORY STYLES -->{% block css %}    <link rel="stylesheet" type="text/css" href="/static/css/select2_metro.css" />	<link rel="stylesheet" href="/static/css/DT_bootstrap.css" />	<link href="/static/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>	<link href="/static/css/bootstrap-responsive.min.css" rel="stylesheet" type="text/css"/>	<link href="/static/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>	<link href="/static/css/style-metro.css" rel="stylesheet" type="text/css"/>	<link href="/static/css/style.css" rel="stylesheet" type="text/css"/>	<link href="/static/css/style-responsive.css" rel="stylesheet" type="text/css"/>	<link href="/static/css/default.css" rel="stylesheet" type="text/css" id="style_color"/>	<link href="/static/css/uniform.default.css" rel="stylesheet" type="text/css"/>    <link rel="stylesheet" type="text/css" href="/static/css/bootstrap-fileupload.css" />    <link rel="stylesheet" type="text/css" href="/static/css/jquery.gritter.css" />    <link rel="stylesheet" type="text/css" href="/static/css/chosen.css" />    <link rel="stylesheet" type="text/css" href="/static/css/select2_metro.css" />    <link rel="stylesheet" type="text/css" href="/static/css/jquery.tagsinput.css" />    <link rel="stylesheet" type="text/css" href="/static/css/clockface.css" />    <link rel="stylesheet" type="text/css" href="/static/css/bootstrap-wysihtml5.css" />    <link rel="stylesheet" type="text/css" href="/static/css/datepicker.css" />    <link rel="stylesheet" type="text/css" href="/static/css/timepicker.css" />    <link rel="stylesheet" type="text/css" href="/static/css/colorpicker.css" />    <link rel="stylesheet" type="text/css" href="/static/css/bootstrap-toggle-buttons.css" />    <link rel="stylesheet" type="text/css" href="/static/css/daterangepicker.css" />    <link rel="stylesheet" type="text/css" href="/static/css/datetimepicker.css" />    <link rel="stylesheet" type="text/css" href="/static/css/multi-select-metro.css" />    <link href="/static/css/bootstrap-modal.css" rel="stylesheet" type="text/css"/>	<!-- END GLOBAL MANDATORY STYLES -->	<link rel="shortcut icon" href="/static/image/favicon.ico" />{% endblock %}{% block body %}<div class="container-fluid"><!-- BEGIN PAGE CONTENT--><div class="row-fluid ">    <div class="span12">        <!-- BEGIN INLINE TABS PORTLET-->        <div class="portlet box green">            <div class="portlet-title">                <div class="caption"><i class="icon-reorder"></i>发布详情</div>                &nbsp; <a href="{% url 'updateall' %}">返回</a>            </div>            <div class="portlet-body">                <div class="row-fluid">                    <div class="span6">                        <!--BEGIN TABS-->                        <div class="tabbable tabbable-custom">                            <div class="tab-content" style="width: 200%;">                                <div class="tab-pane active" id="status">                                    <table class="table table-striped table-hover table-bordered" id="sample_editable_1">									<thead>										<tr>											<th>类型</th>											<th>值</th>										</tr>									</thead>									<tbody>										<tr>											<td>项目名称</td>											<td>{{  code.team.groupname }}</td>										</tr>                                        <tr>											<td>项目目录</td>											<td>{{  code.team.path }}</td>										</tr>                                        <tr>											<td>发布时间</td>											<td>{{  code.create_date|date:'Y-m-d H:i:s' }}</td>										</tr>                                        <tr>											<td>发布人</td>											<td>{{  code.user.first_name }}</td>										</tr>                                        <tr>                                            <td>主机状态</td>                                            <td>                                            <table class="table table-striped table-hover table-bordered" id="sample_editable_1">                                                <tr>                                                    <td>主机名</td>                                                    <td>状态</td>                                                    <td>操作</td>                                                </tr>                                                {% for i in retail %}                                                <tr>                                                    <td>{{ i.host.hostip }}</td>                                                    <td>{{ i.status.status }}</td>                                                     <td><button type="butten" class="zabbix" data_id="{{ i.code.id }}/{{ i.host.id }}">查看性能</button>                                                    <button type="butten" class="login" data_id="{{ i.code.id }}/{{ i.host.id }}">登录</button>                                                    {% if code.team.language_id.id == 2 %}{#                                                    <td><a href="/logs/{{ i.code.id }}/{{ i.host.id }}"><button type="butten">查看日志</button></a></td>#}                                                        <button type="butten" class="log" data_id="{{ i.code.id }}/{{ i.host.id }}">查看日志</button>                                                    {% endif %}                                                </tr>                                                {% endfor %}                                            </table>                                            </td>										</tr>									</tbody>								</table>                                </div>                                <div class="portlet-body" id="all" style="display: none">                                    <div class="container-fluid">                                        <!-- BEGIN PAGE CONTENT-->                                        <div class="row-fluid">                                            <div class="tabbable tabbable-custom tabbable-full-width">                                                <ul class="nav nav-tabs">                                                    <li class="active"><a data-toggle="tab" href="#host">机器性能</a></li>{##}{#                                                    <li><a data-toggle="tab" href="#nginxhost">nginx机器性能</a></li>#}{##}{#                                                    <li><a data-toggle="tab" href="#dbhost">数据库机器性能</a></li>#}                                                    <li ><a data-toggle="tab" href="#elk">业务情况</a></li>                                                </ul>                                                <div class="tab-content">                                                    <div id="host" class="tab-pane active">                                                        <div class="portlet-body">                                                            <div id="dashboard">                                                                <div class="clearfix"></div>                                                                <div class="row-fluid">                                                                    <div class="span6">                                                                        <!-- BEGIN PORTLET-->                                                                        <div id="cpu" style="height: 400px;width: 100%"></div>                                                                        <!-- END PORTLET-->                                                                    </div>                                                                    <div class="span6">                                                                        <!-- BEGIN PORTLET-->                                                                        <div id="network" style="height: 400px;width: 100%"></div>                                                                        <!-- END PORTLET-->                                                                    </div>                                                                </div>                                                                <div class="clearfix"></div>                                                                <div class="row-fluid">                                                                    <div class="span6">                                                                        <!-- BEGIN PORTLET-->                                                                        <div id="process" style="height: 400px;width: 100%"></div>                                                                        <!-- END PORTLET-->                                                                    </div>                                                                    <div class="span6">                                                                        <!-- BEGIN PORTLET-->                                                                        <div id="mem" style="height: 400px;width: 100%"></div>                                                                        <!-- END PORTLET-->                                                                    </div>                                                                </div>                                                                <div class="clearfix"></div>                                                                <div class="row-fluid">                                                                    <div class="span6">                                                                        <!-- BEGIN PORTLET-->                                                                        <div id="disk" style="height: 400px;width: 100%"></div>                                                                        <!-- END PORTLET-->                                                                    </div>                                                                </div>                                                            </div>                                                        </div>                                                    </div>                                                    <!--end tab-pane-->                                                    <div id="nginxhost" class="tab-pane active">                                                        <div class="portlet-body">                                                            <div id="dashboard">                                                                <div class="clearfix"></div>                                                                <div class="row-fluid">                                                                    <div class="span6">                                                                        <!-- BEGIN PORTLET-->                                                                        <div id="nginx1cpu" style="height: 400px;width: 100%"></div>                                                                        <!-- END PORTLET-->                                                                    </div>                                                                    <div class="span6">                                                                        <!-- BEGIN PORTLET-->                                                                        <div id="nginx1network" style="height: 400px;width: 100%"></div>                                                                        <!-- END PORTLET-->                                                                    </div>                                                                </div>                                                                <div class="clearfix"></div>                                                                <div class="row-fluid">                                                                    <div class="span6">                                                                        <!-- BEGIN PORTLET-->                                                                        <div id="nginx1process" style="height: 400px;width: 100%"></div>                                                                        <!-- END PORTLET-->                                                                    </div>                                                                    <div class="span6">                                                                        <!-- BEGIN PORTLET-->                                                                        <div id="nginx1mem" style="height: 400px;width: 100%"></div>                                                                        <!-- END PORTLET-->                                                                    </div>                                                                </div>                                                                <div class="clearfix"></div>                                                                <div class="row-fluid">                                                                    <div class="span6">                                                                        <!-- BEGIN PORTLET-->                                                                        <div id="nginx1disk" style="height: 400px;width: 100%"></div>                                                                        <!-- END PORTLET-->                                                                    </div>                                                                </div>                                                            </div>                                                            <div id="dashboard">                                                                <div class="clearfix"></div>                                                                <div class="row-fluid">                                                                    <div class="span6">                                                                        <!-- BEGIN PORTLET-->                                                                        <div id="nginx2cpu" style="height: 400px;width: 100%"></div>                                                                        <!-- END PORTLET-->                                                                    </div>                                                                    <div class="span6">                                                                        <!-- BEGIN PORTLET-->                                                                        <div id="nginx2network" style="height: 400px;width: 100%"></div>                                                                        <!-- END PORTLET-->                                                                    </div>                                                                </div>                                                                <div class="clearfix"></div>                                                                <div class="row-fluid">                                                                    <div class="span6">                                                                        <!-- BEGIN PORTLET-->                                                                        <div id="nginx2process" style="height: 400px;width: 100%"></div>                                                                        <!-- END PORTLET-->                                                                    </div>                                                                    <div class="span6">                                                                        <!-- BEGIN PORTLET-->                                                                        <div id="nginx2mem" style="height: 400px;width: 100%"></div>                                                                        <!-- END PORTLET-->                                                                    </div>                                                                </div>                                                                <div class="clearfix"></div>                                                                <div class="row-fluid">                                                                    <div class="span6">                                                                        <!-- BEGIN PORTLET-->                                                                        <div id="nginx2disk" style="height: 400px;width: 100%"></div>                                                                        <!-- END PORTLET-->                                                                    </div>                                                                </div>                                                            </div>                                                        </div>                                                    </div>                                                    <!--end tab-pane-->                                                    <div id="dbhost" class="tab-pane active">                                                        <div class="portlet-body">                                                            <div id="dashboard">                                                                <div class="clearfix"></div>                                                                <div class="row-fluid">                                                                    <div class="span6">                                                                        <!-- BEGIN PORTLET-->                                                                        <div id="db1cpu" style="height: 400px;width: 100%"></div>                                                                        <!-- END PORTLET-->                                                                    </div>                                                                    <div class="span6">                                                                        <!-- BEGIN PORTLET-->                                                                        <div id="db1network" style="height: 400px;width: 100%"></div>                                                                        <!-- END PORTLET-->                                                                    </div>                                                                </div>                                                                <div class="clearfix"></div>                                                                <div class="row-fluid">                                                                    <div class="span6">                                                                        <!-- BEGIN PORTLET-->                                                                        <div id="db1process" style="height: 400px;width: 100%"></div>                                                                        <!-- END PORTLET-->                                                                    </div>                                                                    <div class="span6">                                                                        <!-- BEGIN PORTLET-->                                                                        <div id="db1mem" style="height: 400px;width: 100%"></div>                                                                        <!-- END PORTLET-->                                                                    </div>                                                                </div>                                                                <div class="clearfix"></div>                                                                <div class="row-fluid">                                                                    <div class="span6">                                                                        <!-- BEGIN PORTLET-->                                                                        <div id="db1disk" style="height: 400px;width: 100%"></div>                                                                        <!-- END PORTLET-->                                                                    </div>                                                                </div>                                                            </div>                                                            <div id="dashboard">                                                                <div class="clearfix"></div>                                                                <div class="row-fluid">                                                                    <div class="span6">                                                                        <!-- BEGIN PORTLET-->                                                                        <div id="db2cpu" style="height: 400px;width: 100%"></div>                                                                        <!-- END PORTLET-->                                                                    </div>                                                                    <div class="span6">                                                                        <!-- BEGIN PORTLET-->                                                                        <div id="db2network" style="height: 400px;width: 100%"></div>                                                                        <!-- END PORTLET-->                                                                    </div>                                                                </div>                                                                <div class="clearfix"></div>                                                                <div class="row-fluid">                                                                    <div class="span6">                                                                        <!-- BEGIN PORTLET-->                                                                        <div id="db2process" style="height: 400px;width: 100%"></div>                                                                        <!-- END PORTLET-->                                                                    </div>                                                                    <div class="span6">                                                                        <!-- BEGIN PORTLET-->                                                                        <div id="db2mem" style="height: 400px;width: 100%"></div>                                                                        <!-- END PORTLET-->                                                                    </div>                                                                </div>                                                                <div class="clearfix"></div>                                                                <div class="row-fluid">                                                                    <div class="span6">                                                                        <!-- BEGIN PORTLET-->                                                                        <div id="db2disk" style="height: 400px;width: 100%"></div>                                                                        <!-- END PORTLET-->                                                                    </div>                                                                </div>                                                            </div>                                                        </div>                                                    </div>                                                    <!--end tab-pane-->                                                    <div id="elk" class="tab-pane">                                                        <iframe src="http://10.10.0.30:5601/goto/ed542fece2e4890c7a36c4afca82dac2" height="600px" width=100%></iframe>                                                        <link rel="stylesheet" href="http://10.10.0.30:5601/goto/14d6c8bec801a3833758afa538431bdf">                                                    </div>                                                    <!--end tab-pane-->                                                </div>                                            </div>                                            <!--end tabbable-->                                        </div>                                        <!-- END PAGE CONTENT-->                                    </div>                                   <textarea id="reqlog" style="display:none;width: 100%;padding-left: 0px;padding-right: 0px" rows="30">                                       </textarea>                                </div>                            </div>                        </div>                        <!--END TABS-->                    </div>                    <div class="space10 visible-phone"></div>                </div>            </div>        </div>        <!-- END INLINE TABS PORTLET-->        </div>    </div>    <!-- END PAGE CONTENT--></div>{% endblock %}{% block js %}    <script type="text/javascript" src="/static/js/ckeditor.js"></script>    <script type="text/javascript" src="/static/js/bootstrap-fileupload.js"></script>    <script type="text/javascript" src="/static/js/chosen.jquery.min.js"></script>    <script type="text/javascript" src="/static/js/select2.min.js"></script>    <script type="text/javascript" src="/static/js/wysihtml5-0.3.0.js"></script>    <script type="text/javascript" src="/static/js/bootstrap-wysihtml5.js"></script>    <script type="text/javascript" src="/static/js/jquery.tagsinput.min.js"></script>    <script type="text/javascript" src="/static/js/jquery.toggle.buttons.js"></script>    <script type="text/javascript" src="/static/js/bootstrap-datepicker.js"></script>    <script type="text/javascript" src="/static/js/bootstrap-datetimepicker.js"></script>    <script type="text/javascript" src="/static/js/clockface.js"></script>    <script type="text/javascript" src="/static/js/date.js"></script>    <script type="text/javascript" src="/static/js/daterangepicker.js"></script>    <script type="text/javascript" src="/static/js/bootstrap-colorpicker.js"></script>    <script type="text/javascript" src="/static/js/bootstrap-timepicker.js"></script>    <script type="text/javascript" src="/static/js/jquery.inputmask.bundle.min.js"></script>    <script type="text/javascript" src="/static/js/jquery.input-ip-address-control-1.0.min.js"></script>    <script type="text/javascript" src="/static/js/jquery.multi-select.js"></script>    <script src="/static/js/bootstrap-modal.js" type="text/javascript" ></script>    <script src="/static/js/bootstrap-modalmanager.js" type="text/javascript" ></script>		<!-- BEGIN PAGE LEVEL PLUGINS -->    <script src="/static/js/echarts.min.js"></script>	<script type="text/javascript" src="/static/js/select2.min.js"></script>	<script type="text/javascript" src="/static/js/jquery.dataTables.js"></script>	<script type="text/javascript" src="/static/js/DT_bootstrap.js"></script>	<!-- END PAGE LEVEL PLUGINS -->	<!-- BEGIN PAGE LEVEL SCRIPTS -->	<script src="/static/js/app.js"></script>	<script src="/static/js/table-editable.js"></script>	<script>		jQuery(document).ready(function() {       		   // initiate layout and plugins		   App.init();           //FormComponents.init();		});	</script>    <script>        $(".log").on('click',function(){            document.getElementById("reqlog").style.display="";            id=$(this).attr("data_id");            $.ajax({                url:'/logs/'+id,                type:"POST",                success:function(arg){                    $("#reqlog").html(arg)                },                error:function(){                  console.log('error')                }            })        });    </script>    <script>    $(".login").on("click",function(){        alert("login")    })    </script>    <script>        $(".zabbix").on('click',function(){            document.getElementById("all").style.display="";            var cpu= echarts.init(document.getElementById("cpu"));                    option = {                        title: {                            text: 'cpu'                        },                        tooltip : {                            trigger: 'axis'                        },                        legend: {                            data:['15分钟load值','1分钟load值','5分钟load值']                        },                        toolbox: {                            feature: {                                saveAsImage: {}                            }                        },                        grid: {                            left: '3%',                            right: '4%',                            bottom: '3%',                            containLabel: true                        },                        xAxis : [                            {                                type : 'category',                                boundaryGap : false,                                data : []                            }                        ],                        yAxis : [                            {                                type : 'value'                            }                        ],                        series : [                            {                                name:'1分钟load值',                                type:'line',                                stack: '总量',                                data:[]                            },                            {                                name:'5分钟load值',                                type:'line',                                stack: '总量',                                data:[]                            },                            {                                name:'15分钟load值',                                type:'line',                                stack: '总量',                                data:[]                            },                        ]                    };            cpu.setOption(option);            var network= echarts.init(document.getElementById("network"));                    networkoption = {                        title: {                            text: 'network'                        },                        tooltip : {                            trigger: 'axis'                        },                        legend: {                            data:['em1 进入流量','em1 流出流量',]                        },                        toolbox: {                            feature: {                                saveAsImage: {}                            }                        },                        grid: {                            left: '3%',                            right: '4%',                            bottom: '3%',                            containLabel: true                        },                        xAxis : [                            {                                type : 'category',                                boundaryGap : false,                                data : []                            }                        ],                        yAxis : [                            {                                type : 'value'                            }                        ],                        series : [                            {                                name:'em1 进入流量',                                type:'line',                                stack: '总量',                                data:[]                            },                            {                                name:'em1 流出流量',                                type:'line',                                stack: '总量',                                data:[]                            },                        ]                    };            network.setOption(networkoption);            id=$(this).attr("data_id");            var xAxis_data=[];            var one_data=[];            var five_data=[];            var fivten_data=[];            var netwrokx=[]            var networkin=[];            var networkout=[]            $.ajax({                url:'/zabbix/'+id,                type:"GET",                success:function(arg) {                    arg = eval("(" + arg + ")");                    for(var i =0;i<arg.cpu.xAxis.length;i++){                        xAxis_data.push(arg.cpu.xAxis[i]);                        one_data.push(arg.cpu.cpuone[i]);                        five_data.push(arg.cpu.cpufive[i]);                        fivten_data.push(arg.cpu.cpufivten[i]);                    }                    for(var i =0;i<arg.network.xAxis.length;i++){                        netwrokx.push(arg.network.xAxis[i]);                        networkin.push(arg.network.networkin[i]);                        networkout.push(arg.network.networkout[i]);                    }                    var option=cpu.getOption();                    var networkoption=network.getOption();                    option.xAxis[0].data=xAxis_data;                    option.series[0].data=one_data;                    option.series[1].data=five_data;                    option.series[2].data=fivten_data;                    networkoption.xAxis[0].data=netwrokx;                    networkoption.series[0].data=networkin;                    networkoption.series[1].data=networkout;                    cpu.setOption(option);                    network.setOption(networkoption);                },                error:function(){                  alert('error')                }            })        });    </script>	<!-- END JAVASCRIPTS --><script type="text/javascript">  var _gaq = _gaq || [];  _gaq.push(['_setAccount', 'UA-37564768-1']);  _gaq.push(['_setDomainName', 'keenthemes.com']);  _gaq.push(['_setAllowLinker', true]);  _gaq.push(['_trackPageview']);  (function() {    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;    ga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);  })();</script></body><!-- END BODY -->{% endblock %}